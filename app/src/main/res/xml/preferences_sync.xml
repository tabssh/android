<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto">

    <!-- Step 1: Choose Sync Location -->
    <PreferenceCategory android:title="Step 1: Choose Sync Location">

        <Preference
            android:key="sync_location"
            android:title="Sync file location"
            android:summary="Not configured - tap to choose" />

        <Preference
            android:key="sync_location_info"
            android:summary="Choose any cloud storage app (Google Drive, Dropbox, OneDrive, Nextcloud) or local storage"
            android:selectable="false"
            android:icon="@android:drawable/ic_menu_info_details" />

    </PreferenceCategory>

    <!-- Step 2: Security -->
    <PreferenceCategory android:title="Step 2: Encryption Password">

        <Preference
            android:key="sync_password"
            android:title="Encryption password"
            android:summary="Required - encrypts all synced data (AES-256)" />

    </PreferenceCategory>

    <!-- Step 3: Enable Sync -->
    <PreferenceCategory android:title="Step 3: Enable Sync">

        <Preference
            android:key="sync_status"
            android:title="Status"
            android:summary="Not configured"
            android:selectable="true" />

        <SwitchPreferenceCompat
            android:key="sync_enabled"
            android:title="Enable sync"
            android:summary="Complete steps 1-2 above first"
            android:defaultValue="false" />

    </PreferenceCategory>

    <!-- Sync Options (only visible when enabled) -->
    <PreferenceCategory
        android:title="Sync Options"
        android:dependency="sync_enabled">

        <ListPreference
            android:key="sync_frequency"
            android:title="Sync frequency"
            android:summary="%s"
            android:entries="@array/sync_frequency_entries"
            android:entryValues="@array/sync_frequency_values"
            android:defaultValue="1h" />

        <SwitchPreferenceCompat
            android:key="sync_wifi_only"
            android:title="WiFi only"
            android:summary="Only sync when connected to WiFi"
            android:defaultValue="true" />

        <SwitchPreferenceCompat
            android:key="sync_on_change"
            android:title="Sync on change"
            android:summary="Automatically sync when data changes"
            android:defaultValue="true" />

    </PreferenceCategory>

    <!-- What to Sync -->
    <PreferenceCategory
        android:title="What to Sync"
        android:dependency="sync_enabled">

        <SwitchPreferenceCompat
            android:key="sync_connections"
            android:title="Connections"
            android:summary="SSH connection profiles"
            android:defaultValue="true" />

        <SwitchPreferenceCompat
            android:key="sync_identities"
            android:title="Identities"
            android:summary="Reusable credentials"
            android:defaultValue="true" />

        <SwitchPreferenceCompat
            android:key="sync_keys"
            android:title="SSH keys"
            android:summary="Key metadata (private keys stay local)"
            android:defaultValue="false" />

        <SwitchPreferenceCompat
            android:key="sync_snippets"
            android:title="Snippets"
            android:summary="Command snippets"
            android:defaultValue="true" />

        <SwitchPreferenceCompat
            android:key="sync_themes"
            android:title="Themes"
            android:summary="Custom terminal themes"
            android:defaultValue="true" />

    </PreferenceCategory>

    <!-- Actions -->
    <PreferenceCategory
        android:title="Actions"
        android:dependency="sync_enabled">

        <Preference
            android:key="sync_manual_trigger"
            android:title="Sync now"
            android:summary="Manually trigger sync" />

        <Preference
            android:key="sync_last_time"
            android:title="Last sync"
            android:summary="Never synced"
            android:selectable="false" />

    </PreferenceCategory>

    <!-- Advanced -->
    <PreferenceCategory
        android:title="Advanced"
        android:dependency="sync_enabled">

        <Preference
            android:key="sync_force_upload"
            android:title="Force upload"
            android:summary="Upload local data, overwrite remote" />

        <Preference
            android:key="sync_force_download"
            android:title="Force download"
            android:summary="Download remote data, overwrite local" />

        <Preference
            android:key="sync_clear_config"
            android:title="Clear sync configuration"
            android:summary="Remove sync setup and start fresh" />

    </PreferenceCategory>

</PreferenceScreen>
